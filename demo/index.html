<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <link rel="shortcut icon" href="../favicon.ico">
    <title>circuit-chat Demo</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../circuit-chat.html">

    <style>
    circuit-chat {
      width: 200px;
      height: 200px;
    }
    #conversationId {
      width: 240px;
    }
  </style>
  </head>

  <body>

    <p>The <code>circuit-chat</code> component is a simple chat module that can easily be embedded into any website. The conversation ID to use can be passed to the component, or assigned via JavaScript.</p>

    <br>
    <div><b>Usage example:</b></div>
    <xmp class="prettyprint">
      <circuit-chat
        auto-logon 
        conversation="4833fcdb-2b73-42e1-b4be-2a57faa48735">
      </circuit-chat>
    </xmp>

    <div><b>Live example:</b></div>
    <p>Paste a conversation ID of a conversation you are part of and start chatting.</p>
    <input id="conversationId" placeholder="Enter a conversation ID">
    <br><br>

    <!-- conversation attribute is passed in below in JS. For predefined conversations, the
         conversation can be passed in via HTML -->

    <circuit-chat id="chat"></circuit-chat>


    <script type='text/javascript'>
      // Create Circuit client instance to be used in the component.
      var client = new Circuit.Client();
      client.logon('roger.urscheler@unify.com', 'Ansible.2014').then(function () {
        document.getElementById('chat').api = client;

        // Set the conversation property of the component. Could also be defined directly
        // on the component, e.g. <circuit-chat conversation="1234"></circuit-chat>
        document.getElementById('conversationId').addEventListener('input', function (evt) {
          if (evt.target.value.length >= 36) {
            document.getElementById('chat').conversation = evt.target.value;
          }
        });

        // Show how circuit-chat fires on-message events
        document.getElementById('chat').addEventListener('on-message', function (message) {
          console.log('Received message: ' + message);
        });
      }).catch(function (e) {
        console.log('Unable to logon. ' + e);
        client = null;
      });
      

    </script>

  </body>
</html>
